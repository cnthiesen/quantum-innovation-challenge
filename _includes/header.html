<script>
// Navigation Sphere JavaScript
document.addEventListener('DOMContentLoaded', function() {
  const sphereContainer = document.getElementById('navigationSphere');
  if (!sphereContainer) return;
  
  const canvas = sphereContainer.querySelector('.sphere-canvas');
  const points = [];
  const cant = 120;
  const offset = 2 / cant;
  const increment = Math.PI * (3 - Math.sqrt(5));  
  let mouseX = 0;
  let mouseY = 0;

  // Initialize points
  function initializePoints() {
    for (let i = 0; i < cant; i++) {
      const point = document.createElement('div');
      point.className = 'absolute w-[1.5px] h-[1.5px] bg-white rounded-full transform-gpu transition-colors duration-500 ease-in-out group-hover:bg-quantum group-[.frontpage]/app:!bg-electron';
      canvas.appendChild(point);
      points.push({
        element: point,
        x: 0,
        y: 0,
        z: 0,
        scale: 0,
        opacity: 0
      });
    }
    updatePoints();
  }

  // Update point positions based on mouse movement
  function updatePoints() {
    const angleX = (-mouseX / 4) * Math.PI / 420;
    const angleY = (mouseY / 4) * Math.PI / 420;
    
    for (let i = 0; i < cant; i++) {
      const y = (i * offset - 1) + (offset / 2);
      const r = Math.sqrt(1 - Math.pow(y, 2));
      const a = ((i + 1) % cant) * increment + angleX;
      const x = Math.cos(a) * r;
      const z = Math.sin(a) * r;
      
      // Apply Y rotation
      const rotatedY = y * Math.cos(angleY) - z * Math.sin(angleY);
      const rotatedZ = y * Math.sin(angleY) + z * Math.cos(angleY);
      
      const scale = Math.round(rotatedZ * 20000) / 100;
      const opacity = (1 + rotatedZ) / 1.5;
      
      const point = points[i];
      if (point && point.element) {
        const translateX = 15 + x * 12;
        const translateY = 15 + rotatedY * 12;
        const translateZ = scale * 0.5;
        
        point.element.style.transform = `translate3d(${translateX}px, ${translateY}px, ${translateZ}px)`;
        point.element.style.opacity = opacity;
      }
    }
  }

  // Mouse move event listener
  document.addEventListener('mousemove', function(event) {
    mouseX = event.pageX;
    mouseY = event.pageY;
    updatePoints();
  });

  // Initialize the sphere
  initializePoints();
});
</script>

<header class="group/header overflow-hidden w-full z-10">
  {%- assign default_paths = site.pages | map: "path" -%}
  {%- assign page_paths = site.header_pages | default: default_paths -%}
  <div class="flex items-center justify-between transition-colors duration-500 ease-in-out  border-quantum/25">
    <!-- Left side - Logo and Title -->
    <div class="flex border-electron/25 border-b-1 border-r-1 rounded-br-3xl   items-center space-x-3 py-3.5 px-5 h-16 group relative overflow-hidden cursor-pointer">
      <!-- Canvas for animated points (small sphere - keep current size) -->  
      <div id="navigationSphere" class="relative w-8 h-8 z-10"> 
        <div class="sphere-canvas relative w-full h-full"></div>
      </div>
      <!-- Title -->
      <h1 class="text-white font-medium group-hover:text-quantum transition-colors duration-500 ease-in-out z-10 group-[.frontpage]/app:!text-electron">
        <a class="site-title {% if page.url == "/" | relative_url %}active{% endif %}" rel="author" href="{{ "/" | relative_url }}">
          {% if site.nav_title %}
            {{ site.nav_title }}
          {% else %}
            {{ site.title | escape }}
          {% endif %}
        </a>
      </h1>
      <div class="absolute inset-0 bg-electron transform -translate-x-full group-hover:translate-x-0 transition-transform duration-500 ease-in-out"></div>
    </div>
 



    <!-- Navigation Links -->
    <nav class="flex flex-1 items-center space-x-8 py-3.5 px-5 justify-center h-16 hidden xl:flex font-space-mono">
      {%- for path in page_paths -%}
        {%- assign node = site.pages | where: "path", path | first -%}
        {%- if node.title -%}
          {%- if (node.event_status contains event_status) or (node.event_status == blank) or (event_status == "demo") -%}
            <a class="text-white cursor-pointer hover:text-white transition-colors group-[.frontpage]/app:!text-white {% if page.url == node.url %}active{% endif %}" href="{{ node.url | relative_url }}">
              {% if node.menu_icon %}<i class="bi bi-{{ node.menu_icon | escape }}"></i>{% endif %}
              {% if node.menu_title %}
                <span>{{ node.menu_title | escape }}</span>
              {% else %}
                <span>{{ node.title | escape }}</span>
              {% endif %}
            </a>
          {%- endif -%}
        {%- endif -%}
      {%- endfor -%}
    </nav>  

    <!-- Submit Project Button -->
    <button class="flex items-center text-white border-b border-l border-electron/25 rounded-bl-3xl  py-3.5 px-5 h-16 cursor-pointer transition-all duration-300 ease-in-out hover:!text-quantum relative overflow-hidden group">
      <span class="relative z-10">Submit Project</span>
      <div class="absolute inset-0 bg-electron transform -translate-x-full group-hover:translate-x-0 transition-transform duration-500 ease-in-out"></div>
    </button>
  </div>
</header>

